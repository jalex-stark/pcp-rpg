# Unit 03: Chebyshev Inequality
#
# RPG Graph Node: prob.chebyshev_inequality
# Work Package: WP-A
# Difficulty: 1

# Metadata
id: "prob.chebyshev_inequality"
name: "Chebyshev Inequality"
work_package: "WP-A"
difficulty: 1
status: "pending"

# Namespace for generated lemmas
namespace: "Probability.Unit03"

# Import context
imports:
  - "Mathlib.Probability.ProbabilityMassFunction.Basic"
  - "Mathlib.MeasureTheory.Measure.MeasureSpace"
  - "Mathlib.Probability.Variance"
  - "PCP.Probability.Unit02_MarkovInequality.API"

# Additional imports for API file
api_imports:
  - "Mathlib"
  - "PCP.Probability.Unit03.Slop_ChebyshevInequality"

# Target specification
spec: |
  Prove Chebyshev's inequality for random variables.

  Statement: Pr[|X - ğ”¼[X]| â‰¥ t] â‰¤ Var[X] / tÂ²

  Chebyshev's inequality gives concentration bounds using variance.
  It's a direct consequence of Markov's inequality applied to (X - ğ”¼[X])Â².

  Goals:
  1. State for measure spaces: Î¼{|X - ğ”¼[X]| â‰¥ t} â‰¤ Var[X] / tÂ²
  2. Prove from Markov's inequality
  3. Variants:
     - Standardized form: Pr[|X - ğ”¼[X]| â‰¥ kÂ·Ïƒ] â‰¤ 1/kÂ²
     - One-sided bounds
  4. Corollaries and applications

  Note: Should be in mathlib - verify and re-export if so.

# Constraints
max_lemmas: 8
tactic_budget: 4

# Tags for routing
tags:
  - "probability"
  - "arithmetic"
  - "concentration"

# Expected outputs
slop_files:
  - "Slop_ChebyshevInequality.lean"

api_file: "API.lean"

# Module-level comment for API curator
api_comment: |
  Chebyshev's inequality for concentration bounds.

  Uses variance to bound tail probabilities: Pr[|X - ğ”¼[X]| â‰¥ t] â‰¤ Var[X]/tÂ².

  Usage:
  ```lean
  import PCP.Probability.Unit03

  variable {Î± : Type*} [MeasurableSpace Î±] (Î¼ : Measure Î±)
  variable [IsProbabilityMeasure Î¼] (X : Î± â†’ â„)

  -- Chebyshev's inequality
  example (t : â„) (ht : 0 < t) :
      Î¼ {Ï‰ | t â‰¤ |X Ï‰ - âˆ« x, X x âˆ‚Î¼|} â‰¤ Var[X] / t^2 :=
    chebyshev_inequality Î¼ X t ht
  ```

# Dependencies in RPG graph
rpg_dependencies:
  - "prob.markov_inequality"

rpg_dependents: []

# Notes for agents
agent_hints:
  decomposer: |
    Focus on:
    - Check if in mathlib (MeasureTheory.Probability.*)
    - Prove from Markov applied to (X - E[X])Â²
    - Need variance definition
    - Standardized versions useful

  prover: |
    Expected tactics:
    - apply markov_inequality (on squared deviation)
    - unfold variance
    - simp (for measure theory)
    - ring_nf (for algebraic manipulation)
    - apply sq_nonneg

  failure_analyst: |
    Common issues:
    - Check Mathlib.Probability.Variance
    - May be called "meas_ge_le_variance_div" or similar
    - Need integrability conditions
    - t > 0 required for division
